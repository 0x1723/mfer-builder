// base domain for image layers
var baseURL = 'https://www.cerealbox.wtf';

// mfer traits and layers
const background = [];
background[0]= "/traits/background/background-blue.png";
background[1]= "/traits/background/background-yellow.png";
background[2]= "/traits/background/background-green.png";
background[3]= "/traits/background/background-orange.png";
background[4]= "/traits/background/background-red.png";
background[5]= "/traits/background/background-space.png";
background[6]= "/traits/background/background-tree.png";
background[7]= "/traits/background/background-graveyard.png";

const type = [];
type[0]= "/traits/type/type-plainmfer.png";
type[1]= "/traits/type/type-charcoalmfer.png";
type[2]= "/traits/type/type-zombiemfer.png";
type[3]= "/traits/type/type-apemfer.png";
type[4]= "/traits/type/type-alienmfer.png";

const watch420 = [];
watch420[0]= "/traits/watch/watch-argoblack.png";
watch420[1]= "/traits/watch/watch-argowhite.png";
watch420[2]= "/traits/watch/watch-oystergold.png";
watch420[3]= "/traits/watch/watch-oystersilver.png";
watch420[4]= "/traits/watch/watch-subbat.png";
watch420[5]= "/traits/watch/watch-subblack.png";
watch420[6]= "/traits/watch/watch-subblue.png";
watch420[7]= "/traits/watch/watch-subcola.png";
watch420[8]= "/traits/watch/watch-sublantern.png";
watch420[9]= "/traits/watch/watch-subred.png";
watch420[10]= "/traits/watch/watch-subrose.png";
watch420[11]= "/traits/watch/watch-subturquoise.png";

const beard = [];
beard[0]= "/traits/beard/beard-fullbeard.png";
beard[1]= "/traits/beard/beard-shadowbeard.png";

const eyes = [];
eyes[0]= "/traits/eyes/eyes-3dglasses.png";
eyes[1]= "/traits/eyes/eyes-alieneyes.png";
eyes[2]= "/traits/eyes/eyes-eyemask.png";
eyes[3]= "/traits/eyes/eyes-eyepatch.png";
eyes[4]= "/traits/eyes/eyes-nerdglasses.png";
eyes[5]= "/traits/eyes/eyes-purpleshades.png";
eyes[6]= "/traits/eyes/eyes-regulareyes.png";
eyes[7]= "/traits/eyes/eyes-shades.png";
eyes[8]= "/traits/eyes/eyes-vr.png";
eyes[9]= "/traits/eyes/eyes-zombieeyes.png";

const hoodies = [];
hoodies[0]= "/traits/hatoverheadphones/hatoverheadphones-hoodie.png";

const headphones = [];
headphones[0]= "/traits/headphones/headphones-rcsheadphones.png";
headphones[1]= "/traits/headphones/headphones-blackheadphones.png";
headphones[2]= "/traits/headphones/headphones-blueheadphones.png";
headphones[3]= "/traits/headphones/headphones-goldheadphones.png";
headphones[4]= "/traits/headphones/headphones-greenheadphones.png";
headphones[5]= "/traits/headphones/headphones-linedheadphones.png";
headphones[6]= "/traits/headphones/headphones-pinkheadphones.png";
headphones[7]= "/traits/headphones/headphones-redheadphones.png";
headphones[8]= "/traits/headphones/headphones-whiteheadphones.png";

const hatsUnder = [];
hatsUnder[0]= "/traits/hatunderheadphones/hatunderheadphones-bandanablue.png";
hatsUnder[1]= "/traits/hatunderheadphones/hatunderheadphones-bandanadarkgray.png";
hatsUnder[2]= "/traits/hatunderheadphones/hatunderheadphones-bandanared.png";
hatsUnder[3]= "/traits/hatunderheadphones/hatunderheadphones-beaniemonochrome.png";
hatsUnder[4]= "/traits/hatunderheadphones/hatunderheadphones-beanie.png";
hatsUnder[5]= "/traits/hatunderheadphones/hatunderheadphones-capmonochrome.png";
hatsUnder[6]= "/traits/hatunderheadphones/hatunderheadphones-cappurple.png";
hatsUnder[7]= "/traits/hatunderheadphones/hatunderheadphones-headbandbluegreen.png";
hatsUnder[8]= "/traits/hatunderheadphones/hatunderheadphones-headbandbluered.png";
hatsUnder[9]= "/traits/hatunderheadphones/hatunderheadphones-headbandbluewhite.png";
hatsUnder[10]= "/traits/hatunderheadphones/hatunderheadphones-headbandgreenwhite.png";
hatsUnder[11]= "/traits/hatunderheadphones/hatunderheadphones-headbandpinkwhite.png";
hatsUnder[12]= "/traits/hatunderheadphones/hatunderheadphones-knitatlanta.png";
hatsUnder[13]= "/traits/hatunderheadphones/hatunderheadphones-knitbaltimore.png";
hatsUnder[14]= "/traits/hatunderheadphones/hatunderheadphones-knitbuffalo.png";
hatsUnder[15]= "/traits/hatunderheadphones/hatunderheadphones-knitchicago.png";
hatsUnder[16]= "/traits/hatunderheadphones/hatunderheadphones-knitcleveland.png";
hatsUnder[17]= "/traits/hatunderheadphones/hatunderheadphones-knitdallas.png";
hatsUnder[18]= "/traits/hatunderheadphones/hatunderheadphones-knitkc.png";
hatsUnder[19]= "/traits/hatunderheadphones/hatunderheadphones-knitlasvegas.png";
hatsUnder[20]= "/traits/hatunderheadphones/hatunderheadphones-knitmiami.png";
hatsUnder[21]= "/traits/hatunderheadphones/hatunderheadphones-knitnewyork.png";
hatsUnder[22]= "/traits/hatunderheadphones/hatunderheadphones-knitpittsburgh.png";
hatsUnder[23]= "/traits/hatunderheadphones/hatunderheadphones-knitsanfran.png";

const hatsOver = [];
hatsOver[0]= "/traits/hatoverheadphones/hatoverheadphones-cowboyhat.png";
hatsOver[1]= "/traits/hatoverheadphones/hatoverheadphones-pilothelmet.png";
hatsOver[2]= "/traits/hatoverheadphones/hatoverheadphones-tophat.png";

const shortHair = [];
shortHair[0]= "/traits/shorthair/shorthair-messyblack.png";
shortHair[1]= "/traits/shorthair/shorthair-messypurple.png";
shortHair[2]= "/traits/shorthair/shorthair-messyred.png";
shortHair[3]= "/traits/shorthair/shorthair-messyyellow.png";
shortHair[4]= "/traits/shorthair/shorthair-mohawkblack.png";
shortHair[5]= "/traits/shorthair/shorthair-mohawkblue.png";
shortHair[6]= "/traits/shorthair/shorthair-mohawkgreen.png";
shortHair[7]= "/traits/shorthair/shorthair-mohawkpink.png";
shortHair[8]= "/traits/shorthair/shorthair-mohawkpurple.png";
shortHair[9]= "/traits/shorthair/shorthair-mohawkred.png";
shortHair[10]= "/traits/shorthair/shorthair-mohawkyellow.png";

const longHair = [];
longHair[0]= "/traits/longhair/longhair-longhairblack.png";
longHair[1]= "/traits/longhair/longhair-longhairyellow.png";

const mouth = [];
mouth[0]= "/traits/mouth/mouth-flat.png";
mouth[1]= "/traits/mouth/mouth-smile.png";

const shirt = [];
shirt[0]= "/traits/shirt/shirt-collaredshirtblue.png";
shirt[1]= "/traits/shirt/shirt-collaredshirtgreen.png";
shirt[2]= "/traits/shirt/shirt-collaredshirtpink.png";
shirt[3]= "/traits/shirt/shirt-collaredshirtturquoise.png";
shirt[4]= "/traits/shirt/shirt-collaredshirtwhite.png";
shirt[5]= "/traits/shirt/shirt-collaredshirtyellow.png";
shirt[6]= "/traits/shirt/shirt-hoodiedownblue.png";
shirt[7]= "/traits/shirt/shirt-hoodiedowngray.png";
shirt[8]= "/traits/shirt/shirt-hoodiedowngreen.png";
shirt[9]= "/traits/shirt/shirt-hoodiedownpink.png";
shirt[10]= "/traits/shirt/shirt-hoodiedownred.png";
shirt[11]= "/traits/shirt/shirt-hoodiedownwhite.png";
shirt[12]= "/traits/chain/chain-goldchain.png";
shirt[13]= "/traits/chain/chain-silverchain.png";

const smoke = [];
smoke[0]= "/traits/smoke/smoke-cigblack.png";
smoke[1]= "/traits/smoke/smoke-cigwhite.png";
smoke[2]= "/traits/smoke/smoke-pipe.png";

// function to generate mfers
function generateMfers(mfers, seedinput) {
	
	var t0 = parseFloat(seedinput.slice(0, 2));
	var t1 = parseFloat(seedinput.slice(2, 4));
	var t2 = parseFloat(seedinput.slice(4, 6));
	var t3 = parseFloat(seedinput.slice(6, 8));
	var t4 = parseFloat(seedinput.slice(8, 10));
	var t5 = parseFloat(seedinput.slice(10, 12));
	var t6 = parseFloat(seedinput.slice(12, 14));
	var t7 = parseFloat(seedinput.slice(14, 16));
	var t8 = parseFloat(seedinput.slice(16, 18));
	var t9 = parseFloat(seedinput.slice(18, 20));
	var t10 = parseFloat(seedinput.slice(20, 22));
	var t11 = parseFloat(seedinput.slice(22, 24));
	var t12 = parseFloat(seedinput.slice(24, 26));
	var t13 = parseFloat(seedinput.slice(26, 28));
	var t14 = parseFloat(seedinput.slice(28, 30));
	
	document.getElementsByClassName("html-content-holder")[0].style.display = "inherit";
	const elements = document.getElementsByClassName('mferImg');
	var div = document.createElement("div");
	div.setAttribute('class', 'mferImg');
	document.getElementsByClassName('mferWrapper')[0].appendChild(div);
	elements[0].parentNode.removeChild(elements[0]);
	for (let i = 0; i < mfers; i++){
		if (t1 == 1) {
			var _background = "url()"
		} else if (t1 == 0) {
			var _background = "url(" + baseURL + background[Math.floor(Math.random() * 8)] + ")";
		} else if (t1 > 1) {
			var _background = "url(" + baseURL + background[t1 - 2] + ")";
		}
		if (t2 == 1) {
			var _type = "";
		} else if (t2 == 0) {
			var _type = "url(" + baseURL + type[Math.floor(Math.random() * 5)] + "), ";
		} else if (t2 > 1) {
			var _type = "url(" + baseURL + type[t2 - 2] + "), ";
		}
		if (t3 == 1) {
			var _eyes = "";
		} else if (t3 == 0) {
			var _eyes = "url(" + baseURL + eyes[Math.floor(Math.random() * 10)] + "), ";
		} else if (t3 > 1) {
			var _eyes = "url(" + baseURL + eyes[t3 - 2] + "), ";
		}
		if (t4 == 1) {
			var _mouth = "";
		} else if (t4 == 0) {
			var _mouth = "url(" + baseURL + mouth[Math.floor(Math.random() * 2)] + "), ";
		} else if (t4 > 1) {
			var _mouth = "url(" + baseURL + mouth[t4 - 2] + "), ";
		}
		if (t5 == 1) {
			var _headphones = "";
		} else if (t5 == 0) {
			var _headphones = "url(" + baseURL + headphones[Math.floor(Math.random() * 9)] + "), ";
		} else if (t5 > 1) {
			var _headphones = "url(" + baseURL + headphones[t5 - 2] + "), ";
		}
		if (t6 == 1) {
			var _smoke = ""
		} else if (t6 == 0) {
			var rollSmoke = Math.floor(Math.random() * 10);
			if (rollSmoke <= 7) {
				var _smoke = "url(" + baseURL + smoke[Math.floor(Math.random() * 3)] + "), ";
			} else {
				var _smoke = ""
   			}
		} else if (t6 > 1) {
			var _smoke = "url(" + baseURL + smoke[t6 - 2] + "), ";
		}
		if (t7 == 1) {
			var _watch420 = ""
		} else if (t7 == 0) {
			var rollWatch = Math.floor(Math.random() * 10);
			if (rollWatch <= 5) {
				var _watch420 = "url(" + baseURL + watch420[Math.floor(Math.random() * 12)] + "), ";
			} else {
				var _watch420 = ""
			}
		} else if (t7 > 1) {
			var _watch420 = "url(" + baseURL + watch420[t7 - 2] + "), ";
		}
		if (t8 == 1) {
			var _beard = "";
		} else if (t8 == 0) {
			var rollBeard = Math.floor(Math.random() * 10);
			if (rollBeard <= 3) {
				var _beard = "url(" + baseURL + beard[Math.floor(Math.random() * 2)] + "), ";
			} else {
				var _beard = "";
			}
		} else if (t8 > 1) {
			var _beard = "url(" + baseURL + beard[t8 - 2] + "), ";
		}
		if (t9 == 1) {
			var _hoodies = "";
		} else if (t9 == 0) {
			var _hoodies = "url(" + baseURL + hoodies[0] + "), ";
		} else if (t9 > 1) {
			var _hoodies = "url(" + baseURL + hoodies[t9 - 2] + "), ";
		}
		if (t10 == 1) {
			var _shirt = "";
		} else if (t10 == 0) {
			var _shirt = "url(" + baseURL + shirt[Math.floor(Math.random() * 14)] + "), ";
		} else if (t10 > 1) {
			var _shirt = "url(" + baseURL + shirt[t10 - 2] + "), ";
		}
		if (t11 == 1) {
			var _longHair = "";
		} else if (t11 == 0) {
			var _longHair = "url(" + baseURL + longHair[Math.floor(Math.random() * 2)] + "), ";
		} else if (t11 > 1) {
			var _longHair = "url(" + baseURL + longHair[t11 - 2] + "), ";
		}
		if (t12 == 1) {
			var _hatsUnder = "";           
		} else if (t12 == 0) {
			var _hatsUnder = "url(" + baseURL + hatsUnder[Math.floor(Math.random() * 24)] + "), ";           
		} else if (t12 > 1) {
			var _hatsUnder = "url(" + baseURL + hatsUnder[t12 - 2] + "), ";           
		}
		if (t13 == 1) {
			var _hatsOver = "";  
		} else if (t13 == 0) {
			var _hatsOver = "url(" + baseURL + hatsOver[Math.floor(Math.random() * 3)] + "), ";  
		} else if (t13 > 1) {
			var _hatsOver = "url(" + baseURL + hatsOver[t13 - 2] + "), "; 
		}
		if (t14 == 1) {
			var _shortHair = "";
		} else if (t14 == 0) {
			var _shortHair = "url(" + baseURL + shortHair[Math.floor(Math.random() * 12)] + "), ";
		} else if (t14 > 1) {
			var _shortHair = "url(" + baseURL + shortHair[t14 - 2] + "), ";
		}
		var rollHoodies = Math.floor(Math.random() * 10);
		if (rollHoodies <= 1 && t9 == 0) {
			var _hatsOver = "";
			var _hatsUnder = "";
			var _shortHair = "";
			var _longHair = "";
			var _shirt = "";    
		} else if (t9 > 1) {
			var _hatsOver = "";
			var _hatsUnder = "";
			var _shortHair = "";
			var _longHair = "";
			var _shirt = "";  
		} else {
			var _hoodies = "";
			var rollShirts = Math.floor(Math.random() * 10);
    		if (rollShirts <= 5 && t10 == 0) {
    		} else if (t10 > 1) {
    		} else {
    			var _shirt = "";
    	}
    	var rollOverUnder = Math.floor(Math.random() * 10);
    	if (rollOverUnder <= 2 && t12 == 0) { 
			var _hatsOver = ""
			var _shortHair = ""
			var rollLongHair = Math.floor(Math.random() * 10);
			if (rollLongHair <= 3 && t11 == 0) {
    		} else if (t11 > 1) {
    		} else {
				var _longHair = ""
      		}
    	} else if (t12 > 1) {
			var _hatsOver = ""
			var _shortHair = ""
			var rollLongHair = Math.floor(Math.random() * 10);
    		if (rollLongHair <= 3 && t11 == 0) {
    		} else if (t11 > 1) {
    		} else {
				var _longHair = ""
			}
    	} else if (rollOverUnder >= 2 && rollOverUnder < 4 && t13 == 0){
			var _hatsUnder = ""
			var _shortHair = ""
			var rollLongHair = Math.floor(Math.random() * 10);
      		if (rollLongHair <= 3 && t11 == 0) {
       		} else if (t11 > 1) {
        	} else {
        		var _longHair = ""
        	}
    	} else if (t13 > 1){
			var _hatsUnder = ""
			var _shortHair = ""
			var rollLongHair = Math.floor(Math.random() * 10);
      		if (rollLongHair <= 3 && t11 == 0) {
       		} else if (t11 > 1) {
        	} else {
        		var _longHair = ""
        	}
    	} else if (rollOverUnder >= 4 && rollOverUnder < 6 && t11 == 0){
			var _hatsUnder = "";
			var _hatsOver = "";
			var _shortHair = "";
			var rollLongHair = Math.floor(Math.random() * 10);
      		if (rollLongHair <= 3 && t11 == 0) {
       		} else if (t11 > 1) {
        	} else {
        		var _longHair = ""
        	}
    	} else if (t11 > 1){
    		var _hatsUnder = "";
    		var _hatsOver = "";
    		var _shortHair = "";
    		var rollLongHair = Math.floor(Math.random() * 10);
      		if (rollLongHair <= 3 && t11 == 0) {
       		} else if (t11 > 1) {
       		} else {
        		var _longHair = ""
        	}
    	} else if (rollOverUnder >= 6 && t14 == 0) {
			var _hatsUnder = "";
			var _hatsOver = "";
			var _longHair = "";
    	} else if (t14 > 1) {
			var _hatsUnder = "";
			var _hatsOver = "";
			var _longHair = "";
    	}
	}
	var seed = _hoodies + _smoke + _watch420 + _mouth + _hatsOver + _headphones + _hatsUnder + _longHair + _shortHair + _shirt + _eyes + _beard + _type + _background;
	document.getElementsByClassName("html-content-holder")[0].style.backgroundImage = seed;
	window.scrollTo(0,0);	
	html2canvas(document.getElementsByClassName("html-content-holder")[0],{allowTaint: true,useCORS: true}).then(function (canvas) {
	var pngUrl = canvas.toDataURL("image/png");
	var mferImg = document.createElement("img");
	mferImg.src = pngUrl;
	mferImg.className = 'mfers';	
	document.getElementsByClassName("mferImg")[0].appendChild(mferImg);
	});
}

document.getElementsByClassName("html-content-holder")[0].style.display = "none";

}

function buildMfers() {
	var quant = document.getElementsByClassName("quantity")[0].value;
	var _seed = document.getElementsByClassName("seed")[0].value.toString();
	if (_seed == '') {
		var seed = '000000000000000000000000000000';
	} else {
		var seed = _seed;
	}
	generateMfers(quant, seed);
	if (seed == '000000000000000000000000000000') {
		document.getElementsByClassName("seed")[0].value = '';
	} else {
		document.getElementsByClassName("seed")[0].value = seed;
	}
}

function updateSeed() {
	var _t0 = '00';
	var _t1 = document.getElementsByClassName("background")[0].value;
	var _t2 = document.getElementsByClassName("type")[0].value;
	var _t3 = document.getElementsByClassName("eyes")[0].value;
	var _t4 = document.getElementsByClassName("mouth")[0].value;
	var _t5 = document.getElementsByClassName("headphones")[0].value;
	var _t6 = document.getElementsByClassName("smoke")[0].value;
	var _t7 = document.getElementsByClassName("watch")[0].value;
	var _t8 = document.getElementsByClassName("beard")[0].value;
	var _t9 = document.getElementsByClassName("hoodies")[0].value;
	var _t10 = document.getElementsByClassName("shirt")[0].value;
	var _t11 = document.getElementsByClassName("longHair")[0].value;
	var _t12 = document.getElementsByClassName("hatsUnder")[0].value;
	var _t13 = document.getElementsByClassName("hatsOver")[0].value;
	var _t14 = document.getElementsByClassName("shortHair")[0].value;
	var _seed = _t1 + _t2 + _t3 + _t4 + _t5 + _t6 + _t7 + _t8 + _t9 + _t10 + _t11 + _t12 + _t13 + _t14;
	document.getElementsByClassName("seed")[0].value = _seed;
	buildMfers();
}

function wtf() {
	const filters = [];
	filters[0]= "invert(.8)";
	filters[1]= "grayscale(100%)";
	filters[2]= "saturate(10)";
	filters[3]= "sepia(1)";
	filters[4]= "contrast(5)";
	filters[5]= "hue-rotate(3.142rad)";
	var count = -1;
	for (let i = 0; i < document.getElementsByClassName("mfers").length; i++){
		document.getElementsByClassName("mfers")[i].style.filter = filters[++count % filters.length];
	};
}
